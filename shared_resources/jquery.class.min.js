/*--------------------------------------------*
 * Low-level plugin that helps 
 * you to create classes/objects
 * https://github.com/kilhage/jquery-class
 *--------------------------------------------*
 * Author Emil Kilhage
 * MIT Licensed
 *--------------------------------------------*
 * Last Update: 2011-04-06 23:44:12
 * Version 1.0.0
 *--------------------------------------------*/
(function(m){function n(a,b,c,g){c=c!=null?c:b;for(var e in a)if(a.hasOwnProperty(e))c[e]=d.rewrite(e,a,b,g);return b}function j(a){return y.call(a)==="[object Function]"}var p=false,d,q="_Class"+(new Date).getTime()+"_",r="_"+q+"_",u="_"+r+"_",v=/\b_parent\b/.test(function(){this._parent()}),w=v?/\b_parent\b/:/.*/,o=v?/\b_parent\b\./:/.*/,z=RegExp.prototype.test,y=Object.prototype.toString,s=function(){function a(b){if(this instanceof a){if(p===false&&j(this.init))this.init.apply(this,typeof b===
"object"&&b!==null&&b.callee?b:arguments)}else return new a(arguments)}a[r]=true;return a},k=s();k.extend=function(a,b){var c=s(),g,e=this,f,l=e.prototype;if(typeof a!=="boolean")b=a;b=typeof b==="object"&&b!==null?b:{};f=b.prototype;for(g in e)if(e.hasOwnProperty(g))c[g]=e[g];if(a===true||typeof f==="object"&&f!=null){n(b,e,c,d.initPopulator(e));b=f}c.constructor=c;p=true;f=new e;p=false;b=b||{};n(b,l,f,d.initPopulator(l));c.prototype=f;c.prototype.constructor=c;c.inherits=function(h){return h===
e||e.inherits(h)};return c};k.addMethods=function(a){return n(a,this.prototype)};k.inherits=function(){return false};k.prototype={addMethods:function(a){return n(a,this)}};o.test=function(a){return z.call(o,a)||a[u]===true};d=function(a,b){return k.extend(a,b)};d.fnSearch=w;d.parentFnSearch=o;d.log_prefix="_Class";d.errors={logic_parent_call:"Logic error, unable to call the parent function since it isn't defined..",invalid_$:"Invalid data-type of the global '$' property"};d.makeClass=s;d.rewrite=
function(a,b,c,g){return j(b[a])&&(j(c[a])||!(a in c))&&!d.is(b[a])&&w.test(b[a])?function(e,f,l){f||(f=function(){throw d.log_prefix+d.errors.logic_parent_call;});var h=!!(j(l)&&o.test(e)),x=function(){var A="_parent"in this,B=this._parent,i;if(h===true){h=false;i=l();for(var t in i)if(i.hasOwnProperty(t))f[t]=i[t]}this._parent=f;this._parent[q]=this;i=e.apply(this,arguments);if(A)this._parent=B;else try{delete this._parent}catch(C){}return i};x[u]=h;return x}(b[a],c[a],g):b[a]};d.is=function(a){return!!(a&&
a[r]===true)};d.initPopulator=function(a){var b;return function(){if(b==null){b={};for(var c in a)if(j(a[c]))b[c]=function(g){return function(){return g.apply(this[q],arguments)}}(a[c])}return b}};if(!m.$){if("$"in m)throw d.log_prefix+d.errors.invalid_$;m.$={}}m.$.Class=d})(this);
